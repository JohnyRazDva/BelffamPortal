<!DOCTYPE html>
<html   xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
        lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>
    <div class="profile-data">
        <p>Username: <span th:text="${user.username}"></span></p>
        <p>First name: <span th:text="${user.firstName}"></span></p>
        <p>Last name: <span th:text="${user.lastName}"></span></p>
        <p>Email: <span th:text="${user.email}"></span></p>
        <p>Role: <span th:text="${role}"></span>
            <select form="update-user-data"  name="roleId">
                <option value="0">select role</option>
                <option th:each="role : ${roles}" th:value="${role.id}" th:text="${role.title}"></option>
            </select>
        </p>
    </div>
    <div class="user-profile-form">
        <form  id="update-user-data"  action="/options/ui/user/update-role">
            <input type="hidden" name="userId" th:value="${user.id}">
            <button type="submit">Save</button>
        </form>
            <button type="submit" onclick="button_onclick(changePasswordForm)" >Change password</button>
            <form method="post" style="visibility: hidden;" id="changePasswordForm"  action="/options/profile/change-user-password">
                <input type="hidden" name="id" th:value="${user.id}"/>

                <label>New password</label>
                <input type="password" name="newPassword" id="newPassword" required="">

                <button type="submit" >Save</button>
            </form>
    </div>

    <script>
    function button_onclick(element) {
    var visibility = element.style.visibility;
    element.style.visibility = visibility == "visible" ? 'hidden' : "visible";
    }
    </script>
</body>
</html>